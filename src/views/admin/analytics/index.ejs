      <div class="content-header">
        <h1><%= title %> Dashboard</h1>
        <div>
          <button class="btn btn-secondary" id="exportBtn">
            <i class="fas fa-download"></i> Export Report
          </button>
          <button class="btn btn-primary" id="refreshBtn">
            <i class="fas fa-sync-alt"></i> Refresh Data
          </button>
        </div>
      </div>

      <!-- Analytics Date Filter -->
      <div class="card" style="margin-bottom: 20px">
        <div class="card-body">
          <div class="form-row">
            <div class="form-group">
              <label for="dateRange">Date Range</label>
              <select id="dateRange" class="form-control">
                <option value="today">Today</option>
                <option value="yesterday">Yesterday</option>
                <option value="week" selected>Last 7 days</option>
                <option value="month">Last 30 days</option>
                <option value="quarter">Last 90 days</option>
                <option value="year">Last year</option>
                <option value="custom">Custom range</option>
              </select>
            </div>
            <div
              class="form-group"
              id="customDateContainer"
              style="display: none"
            >
              <label for="startDate">Start Date</label>
              <input type="date" id="startDate" class="form-control" />
            </div>
            <div
              class="form-group"
              id="customDateEndContainer"
              style="display: none"
            >
              <label for="endDate">End Date</label>
              <input type="date" id="endDate" class="form-control" />
            </div>
            <div class="form-group" style="align-self: flex-end">
              <button
                type="button"
                id="applyDateFilter"
                class="btn btn-primary"
              >
                Apply
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <h3>Page Views</h3>
          <p class="stat-value">24,780</p>
          <p class="trend up">
            <i class="fas fa-arrow-up"></i> 12.5% from previous period
          </p>
          <div class="stat-icon">
            <i class="fas fa-eye"></i>
          </div>
        </div>

        <div class="stat-card">
          <h3>Unique Visitors</h3>
          <p class="stat-value">8,425</p>
          <p class="trend up">
            <i class="fas fa-arrow-up"></i> 8.2% from previous period
          </p>
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
        </div>

        <div class="stat-card">
          <h3>Avg. Session Duration</h3>
          <p class="stat-value">3m 42s</p>
          <p class="trend up">
            <i class="fas fa-arrow-up"></i> 4.3% from previous period
          </p>
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
        </div>

        <div class="stat-card">
          <h3>Bounce Rate</h3>
          <p class="stat-value">42.8%</p>
          <p class="trend down">
            <i class="fas fa-arrow-down"></i> 2.7% from previous period
          </p>
          <div class="stat-icon">
            <i class="fas fa-sign-out-alt"></i>
          </div>
        </div>
      </div>

      <!-- Charts -->
      <div class="charts-grid">
        <div class="card">
          <div class="card-header">
            <h3>Traffic Overview</h3>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="trafficChart"></canvas>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Traffic Sources</h3>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="sourcesChart"></canvas>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>User Devices</h3>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="devicesChart"></canvas>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Page Performance</h3>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="performanceChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Pages Table -->
      <div class="card">
        <div class="card-header">
          <h3>Top Pages</h3>
        </div>
        <div class="card-body">
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Page</th>
                  <th>Views</th>
                  <th>Unique Visitors</th>
                  <th>Avg. Time on Page</th>
                  <th>Bounce Rate</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>/home</td>
                  <td>5,720</td>
                  <td>3,850</td>
                  <td>2m 15s</td>
                  <td>32.4%</td>
                </tr>
                <tr>
                  <td>/products</td>
                  <td>4,325</td>
                  <td>2,980</td>
                  <td>3m 42s</td>
                  <td>25.7%</td>
                </tr>
                <tr>
                  <td>/blog/top-10-tips</td>
                  <td>3,842</td>
                  <td>3,105</td>
                  <td>4m 38s</td>
                  <td>18.3%</td>
                </tr>
                <tr>
                  <td>/about-us</td>
                  <td>2,540</td>
                  <td>2,180</td>
                  <td>1m 56s</td>
                  <td>45.2%</td>
                </tr>
                <tr>
                  <td>/contact</td>
                  <td>1,985</td>
                  <td>1,740</td>
                  <td>2m 12s</td>
                  <td>38.5%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

  <script src="assets/js/common.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Initialize charts
      initializeCharts();

      // Setup date range filter
      const dateRangeSelect = document.getElementById("dateRange");
      const customDateContainer = document.getElementById(
        "customDateContainer"
      );
      const customDateEndContainer = document.getElementById(
        "customDateEndContainer"
      );

      dateRangeSelect.addEventListener("change", function () {
        if (this.value === "custom") {
          customDateContainer.style.display = "block";
          customDateEndContainer.style.display = "block";
        } else {
          customDateContainer.style.display = "none";
          customDateEndContainer.style.display = "none";
        }
      });

      // Apply button click
      document
        .getElementById("applyDateFilter")
        .addEventListener("click", function () {
          // Here you would update the data based on the selected date range
          showMessage(
            "dateFilterApplied",
            "Date filter applied. Data updated.",
            3000
          );

          // Reinitialize charts with new data
          initializeCharts();
        });

      // Export button click
      document
        .getElementById("exportBtn")
        .addEventListener("click", function () {
          showMessage(
            "exportStarted",
            "Export started. Your report will be downloaded shortly.",
            3000
          );
          // In a real app, this would trigger a download
          setTimeout(() => {
            const a = document.createElement("a");
            a.style.display = "none";
            a.href = "#";
            a.download = "analytics-report.pdf";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          }, 1500);
        });

      // Refresh button click
      document
        .getElementById("refreshBtn")
        .addEventListener("click", function () {
          showMessage("refreshing", "Refreshing data...", 1500);
          setTimeout(() => {
            initializeCharts();
            showMessage(
              "refreshComplete",
              "Data refreshed successfully!",
              3000
            );
          }, 1500);
        });
    });

    function initializeCharts() {
      // Traffic Overview Chart
      const trafficCtx = document
        .getElementById("trafficChart")
        .getContext("2d");
      new Chart(trafficCtx, {
        type: "line",
        data: {
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          datasets: [
            {
              label: "This Week",
              data: [3250, 3800, 4200, 3950, 4100, 3700, 3900],
              borderColor: "#3a86ff",
              backgroundColor: "rgba(58, 134, 255, 0.1)",
              tension: 0.3,
              fill: true,
            },
            {
              label: "Previous Week",
              data: [2800, 3300, 3600, 3550, 3300, 3400, 3200],
              borderColor: "#8ecaff",
              backgroundColor: "rgba(142, 202, 255, 0.1)",
              tension: 0.3,
              fill: true,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: false,
            },
            tooltip: {
              mode: "index",
              intersect: false,
            },
            legend: {
              position: "top",
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                drawBorder: false,
              },
            },
            x: {
              grid: {
                display: false,
                drawBorder: false,
              },
            },
          },
        },
      });

      // Traffic Sources Chart
      const sourcesCtx = document
        .getElementById("sourcesChart")
        .getContext("2d");
      new Chart(sourcesCtx, {
        type: "doughnut",
        data: {
          labels: ["Direct", "Search", "Social", "Referral", "Email"],
          datasets: [
            {
              data: [35, 25, 20, 15, 5],
              backgroundColor: [
                "#3a86ff",
                "#ff006e",
                "#8338ec",
                "#fb5607",
                "#ffbe0b",
              ],
              borderWidth: 0,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: "right",
            },
          },
          cutout: "65%",
        },
      });

      // User Devices Chart
      const devicesCtx = document
        .getElementById("devicesChart")
        .getContext("2d");
      new Chart(devicesCtx, {
        type: "bar",
        data: {
          labels: ["Desktop", "Mobile", "Tablet"],
          datasets: [
            {
              label: "Users by Device",
              data: [45, 40, 15],
              backgroundColor: ["#3a86ff", "#ff006e", "#8338ec"],
              borderWidth: 0,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: false,
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                drawBorder: false,
              },
            },
            x: {
              grid: {
                display: false,
                drawBorder: false,
              },
            },
          },
        },
      });

      // Page Performance Chart
      const performanceCtx = document
        .getElementById("performanceChart")
        .getContext("2d");
      new Chart(performanceCtx, {
        type: "radar",
        data: {
          labels: [
            "Load Time",
            "Interactivity",
            "Accessibility",
            "SEO",
            "Best Practices",
          ],
          datasets: [
            {
              label: "Current",
              data: [85, 78, 92, 88, 95],
              backgroundColor: "rgba(58, 134, 255, 0.2)",
              borderColor: "#3a86ff",
              pointBackgroundColor: "#3a86ff",
              pointBorderColor: "#fff",
              pointHoverBackgroundColor: "#fff",
              pointHoverBorderColor: "#3a86ff",
            },
            {
              label: "Previous",
              data: [75, 65, 85, 80, 90],
              backgroundColor: "rgba(255, 0, 110, 0.2)",
              borderColor: "#ff006e",
              pointBackgroundColor: "#ff006e",
              pointBorderColor: "#fff",
              pointHoverBackgroundColor: "#fff",
              pointHoverBorderColor: "#ff006e",
            },
          ],
        },
        options: {
          responsive: true,
          elements: {
            line: {
              borderWidth: 2,
            },
          },
          scales: {
            r: {
              angleLines: {
                display: true,
              },
              suggestedMin: 0,
              suggestedMax: 100,
            },
          },
        },
      });
    }
  </script>

  <style>
    /* Additional styles for analytics page */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .stat-card {
      background-color: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      position: relative;
      overflow: hidden;
    }

    .stat-card h3 {
      font-size: 16px;
      color: #666;
      margin-bottom: 10px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 600;
      color: #333;
      margin-bottom: 15px;
    }

    .trend {
      font-size: 14px;
      margin: 0;
    }

    .trend.up {
      color: #4caf50;
    }

    .trend.down {
      color: #f44336;
    }

    .stat-icon {
      position: absolute;
      top: 15px;
      right: 15px;
      color: rgba(58, 134, 255, 0.1);
      font-size: 28px;
    }

    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
      padding: 10px;
    }

    @media (max-width: 600px) {
      .charts-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</body>
