<body>
  <div class="app-container">
    <!-- Main Content -->
    <main class="content-wrapper">
      <div class="content-header">
        <h1><%= title %></h1>
      </div>

      <!-- Success Message -->
      <div
        id="successMessage"
        class="message message-success"
        style="display: none"
      >
        <i class="fas fa-check-circle"></i>
        <span data-message-text>Settings have been saved successfully.</span>
      </div>

      <!-- Settings Tabs -->
      <div class="settings-container">
        <div class="settings-sidebar">
          <ul class="settings-nav">
            <li class="active" data-tab="general">
              <i class="fas fa-globe"></i> General
            </li>
            <li data-tab="appearance">
              <i class="fas fa-palette"></i> Appearance
            </li>
            <li data-tab="users">
              <i class="fas fa-user-cog"></i> User Preferences
            </li>
            <li data-tab="email"><i class="fas fa-envelope"></i> Email</li>
            <li data-tab="security">
              <i class="fas fa-shield-alt"></i> Security
            </li>
            <li data-tab="backup">
              <i class="fas fa-database"></i> Backup & Restore
            </li>
          </ul>
        </div>
        <div class="settings-content">
          <!-- General Settings Tab -->
          <div class="settings-tab active" id="general-tab">
            <div class="card">
              <div class="card-header">
                <h3>Site Information</h3>
              </div>
              <div class="card-body">
                <form id="generalSettingsForm">
                  <div class="form-group">
                    <label for="siteName">Site Name</label>
                    <input
                      type="text"
                      id="siteName"
                      class="form-control"
                      value="Admin Dashboard"
                    />
                  </div>
                  <div class="form-group">
                    <label for="siteUrl">Site URL</label>
                    <input
                      type="url"
                      id="siteUrl"
                      class="form-control"
                      value="https://example.com"
                    />
                  </div>
                  <div class="form-group">
                    <label for="siteDescription">Site Description</label>
                    <textarea
                      id="siteDescription"
                      class="form-control"
                      rows="3"
                    >
A powerful admin dashboard for managing content and users.</textarea
                    >
                  </div>
                  <div class="form-group">
                    <label for="timezone">Timezone</label>
                    <select id="timezone" class="form-control">
                      <option value="UTC">
                        UTC (Coordinated Universal Time)
                      </option>
                      <option value="EST" selected>
                        EST (Eastern Standard Time)
                      </option>
                      <option value="PST">PST (Pacific Standard Time)</option>
                      <option value="CET">CET (Central European Time)</option>
                      <option value="JST">JST (Japan Standard Time)</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="dateFormat">Date Format</label>
                    <select id="dateFormat" class="form-control">
                      <option value="MM/DD/YYYY" selected>MM/DD/YYYY</option>
                      <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                      <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                    </select>
                  </div>
                  <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">
                      <i class="fas fa-save"></i> Save Changes
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- Appearance Settings Tab -->
          <div class="settings-tab" id="appearance-tab">
            <div class="card">
              <div class="card-header">
                <h3>Theme Options</h3>
              </div>
              <div class="card-body">
                <form id="appearanceSettingsForm">
                  <div class="form-group">
                    <label for="themeColor">Primary Color</label>
                    <div class="color-picker-container">
                      <input type="color" id="themeColor" value="#3a86ff" />
                      <span class="color-value">#3a86ff</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="darkMode">Color Theme</label>
                    <div class="radio-group">
                      <div class="radio-option">
                        <input
                          type="radio"
                          id="lightMode"
                          name="colorTheme"
                          value="light"
                          checked
                        />
                        <label for="lightMode">Light Mode</label>
                      </div>
                      <div class="radio-option">
                        <input
                          type="radio"
                          id="darkMode"
                          name="colorTheme"
                          value="dark"
                        />
                        <label for="darkMode">Dark Mode</label>
                      </div>
                      <div class="radio-option">
                        <input
                          type="radio"
                          id="autoMode"
                          name="colorTheme"
                          value="auto"
                        />
                        <label for="autoMode">Auto (follow system)</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="fontFamily">Font Family</label>
                    <select id="fontFamily" class="form-control">
                      <option value="segoe-ui" selected>Segoe UI</option>
                      <option value="roboto">Roboto</option>
                      <option value="open-sans">Open Sans</option>
                      <option value="lato">Lato</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="fontSize">Font Size</label>
                    <select id="fontSize" class="form-control">
                      <option value="small">Small</option>
                      <option value="medium" selected>Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </div>
                  <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">
                      <i class="fas fa-save"></i> Save Changes
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- User Preferences Tab -->
          <div class="settings-tab" id="users-tab">
            <div class="card">
              <div class="card-header">
                <h3>User Preferences</h3>
              </div>
              <div class="card-body">
                <form id="userPreferencesForm">
                  <div class="form-group">
                    <label for="defaultRole">Default User Role</label>
                    <select id="defaultRole" class="form-control">
                      <option value="admin">Administrator</option>
                      <option value="editor" selected>Editor</option>
                      <option value="viewer">Viewer</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>User Registration</label>
                    <div class="radio-group">
                      <div class="radio-option">
                        <input
                          type="radio"
                          id="regOpen"
                          name="registration"
                          value="open"
                        />
                        <label for="regOpen">Open</label>
                      </div>
                      <div class="radio-option">
                        <input
                          type="radio"
                          id="regClosed"
                          name="registration"
                          value="closed"
                        />
                        <label for="regClosed">Closed</label>
                      </div>
                      <div class="radio-option">
                        <input
                          type="radio"
                          id="regAdmin"
                          name="registration"
                          value="admin"
                          checked
                        />
                        <label for="regAdmin">Admin approval required</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="checkbox-group">
                      <input type="checkbox" id="userDeleteConfirm" checked />
                      <label for="userDeleteConfirm"
                        >Require confirmation for user deletion</label
                      >
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="checkbox-group">
                      <input
                        type="checkbox"
                        id="userInactiveReminders"
                        checked
                      />
                      <label for="userInactiveReminders"
                        >Send reminders to inactive users</label
                      >
                    </div>
                  </div>
                  <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">
                      <i class="fas fa-save"></i> Save Changes
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- Email Settings Tab -->
          <div class="settings-tab" id="email-tab">
            <div class="card">
              <div class="card-header">
                <h3>Email Configuration</h3>
              </div>
              <div class="card-body">
                <form id="emailSettingsForm">
                  <div class="form-group">
                    <label for="emailFrom">From Email</label>
                    <input
                      type="email"
                      id="emailFrom"
                      class="form-control"
                      value="noreply@example.com"
                    />
                  </div>
                  <div class="form-group">
                    <label for="emailName">From Name</label>
                    <input
                      type="text"
                      id="emailName"
                      class="form-control"
                      value="Admin Dashboard"
                    />
                  </div>
                  <div class="form-section">
                    <h3>SMTP Settings</h3>
                    <div class="form-group">
                      <label for="smtpHost">SMTP Host</label>
                      <input
                        type="text"
                        id="smtpHost"
                        class="form-control"
                        value="smtp.example.com"
                      />
                    </div>
                    <div class="form-row">
                      <div class="form-group">
                        <label for="smtpPort">SMTP Port</label>
                        <input
                          type="text"
                          id="smtpPort"
                          class="form-control"
                          value="587"
                        />
                      </div>
                      <div class="form-group">
                        <label for="smtpEncryption">Encryption</label>
                        <select id="smtpEncryption" class="form-control">
                          <option value="none">None</option>
                          <option value="ssl">SSL</option>
                          <option value="tls" selected>TLS</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="smtpUsername">SMTP Username</label>
                      <input
                        type="text"
                        id="smtpUsername"
                        class="form-control"
                        value="user@example.com"
                      />
                    </div>
                    <div class="form-group">
                      <label for="smtpPassword">SMTP Password</label>
                      <input
                        type="password"
                        id="smtpPassword"
                        class="form-control"
                        value="password"
                      />
                    </div>
                    <div class="form-buttons" style="margin-bottom: 20px">
                      <button
                        type="button"
                        id="testEmailBtn"
                        class="btn btn-secondary"
                      >
                        <i class="fas fa-paper-plane"></i>
                        Send Test Email
                      </button>
                    </div>
                  </div>
                  <div class="form-section">
                    <h3>Notification Settings</h3>
                    <div class="form-group">
                      <div class="checkbox-group">
                        <input type="checkbox" id="notifyNewUser" checked />
                        <label for="notifyNewUser">New user registration</label>
                      </div>
                      <div class="checkbox-group">
                        <input type="checkbox" id="notifyNewComment" checked />
                        <label for="notifyNewComment"
                          >New comment submission</label
                        >
                      </div>
                      <div class="checkbox-group">
                        <input type="checkbox" id="notifyNewOrder" checked />
                        <label for="notifyNewOrder">New order placement</label>
                      </div>
                      <div class="checkbox-group">
                        <input type="checkbox" id="notifyLowStock" />
                        <label for="notifyLowStock">Low stock alerts</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">
                      <i class="fas fa-save"></i> Save Changes
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- Security Settings Tab -->
          <div class="settings-tab" id="security-tab">
            <div class="card">
              <div class="card-header">
                <h3>Security Settings</h3>
              </div>
              <div class="card-body">
                <form id="securitySettingsForm">
                  <div class="form-section">
                    <h3>Password Policy</h3>
                    <div class="form-group">
                      <label for="passwordMinLength">Minimum Length</label>
                      <input
                        type="number"
                        id="passwordMinLength"
                        class="form-control"
                        value="8"
                        min="6"
                        max="32"
                      />
                    </div>
                    <div class="form-group">
                      <div class="checkbox-group">
                        <input type="checkbox" id="requireUppercase" checked />
                        <label for="requireUppercase"
                          >Require uppercase letters</label
                        >
                      </div>
                      <div class="checkbox-group">
                        <input type="checkbox" id="requireLowercase" checked />
                        <label for="requireLowercase"
                          >Require lowercase letters</label
                        >
                      </div>
                      <div class="checkbox-group">
                        <input type="checkbox" id="requireNumbers" checked />
                        <label for="requireNumbers">Require numbers</label>
                      </div>
                      <div class="checkbox-group">
                        <input type="checkbox" id="requireSpecial" checked />
                        <label for="requireSpecial"
                          >Require special characters</label
                        >
                      </div>
                    </div>
                  </div>
                  <div class="form-section">
                    <h3>Login Security</h3>
                    <div class="form-group">
                      <div class="checkbox-group">
                        <input type="checkbox" id="enableTwoFactor" />
                        <label for="enableTwoFactor"
                          >Enable Two-Factor Authentication</label
                        >
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="sessionTimeout"
                        >Session Timeout (minutes)</label
                      >
                      <input
                        type="number"
                        id="sessionTimeout"
                        class="form-control"
                        value="30"
                        min="5"
                        max="1440"
                      />
                    </div>
                    <div class="form-group">
                      <label for="maxLoginAttempts">Max Login Attempts</label>
                      <input
                        type="number"
                        id="maxLoginAttempts"
                        class="form-control"
                        value="5"
                        min="1"
                        max="10"
                      />
                    </div>
                    <div class="form-group">
                      <label for="lockoutTime"
                        >Account Lockout Time (minutes)</label
                      >
                      <input
                        type="number"
                        id="lockoutTime"
                        class="form-control"
                        value="30"
                        min="5"
                        max="1440"
                      />
                    </div>
                  </div>
                  <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">
                      <i class="fas fa-save"></i> Save Changes
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- Backup & Restore Tab -->
          <div class="settings-tab" id="backup-tab">
            <div class="card">
              <div class="card-header">
                <h3>Backup & Restore</h3>
              </div>
              <div class="card-body">
                <div class="form-section">
                  <h3>Database Backup</h3>
                  <p>
                    Create a backup of your database. This will save all your
                    data including users, posts, products, and settings.
                  </p>
                  <div class="form-buttons" style="margin-bottom: 20px">
                    <button
                      type="button"
                      id="createBackupBtn"
                      class="btn btn-primary"
                    >
                      <i class="fas fa-download"></i>
                      Create Backup
                    </button>
                  </div>
                </div>

                <div class="form-section">
                  <h3>Automatic Backups</h3>
                  <div class="form-group">
                    <div class="checkbox-group">
                      <input type="checkbox" id="enableAutoBackups" checked />
                      <label for="enableAutoBackups"
                        >Enable automatic backups</label
                      >
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="backupFrequency">Backup Frequency</label>
                    <select id="backupFrequency" class="form-control">
                      <option value="daily">Daily</option>
                      <option value="weekly" selected>Weekly</option>
                      <option value="monthly">Monthly</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="backupRetention">Retention Period (days)</label>
                    <input
                      type="number"
                      id="backupRetention"
                      class="form-control"
                      value="30"
                      min="7"
                      max="365"
                    />
                  </div>
                </div>

                <div class="form-section">
                  <h3>Restore Backup</h3>
                  <p class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    Warning: Restoring a backup will overwrite all current data.
                    This action cannot be undone.
                  </p>
                  <div class="form-group">
                    <label for="backupFile">Select Backup File</label>
                    <input type="file" id="backupFile" class="form-control" />
                  </div>
                  <div class="form-buttons">
                    <button
                      type="button"
                      id="restoreBackupBtn"
                      class="btn btn-danger"
                    >
                      <i class="fas fa-upload"></i>
                      Restore Backup
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="assets/js/common.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Settings tab navigation
      const tabLinks = document.querySelectorAll(".settings-nav li");
      const tabContents = document.querySelectorAll(".settings-tab");

      tabLinks.forEach((link) => {
        link.addEventListener("click", function () {
          const tabId = this.getAttribute("data-tab");

          // Remove active class from all links and tabs
          tabLinks.forEach((l) => l.classList.remove("active"));
          tabContents.forEach((t) => t.classList.remove("active"));

          // Add active class to selected link and tab
          this.classList.add("active");
          document.getElementById(`${tabId}-tab`).classList.add("active");
        });
      });

      // Handle form submissions
      const forms = document.querySelectorAll("form");
      forms.forEach((form) => {
        form.addEventListener("submit", function (e) {
          e.preventDefault();

          // In a real app, this would save settings via API
          console.log(`Saving ${this.id} settings...`);

          // Show success message
          showMessage(
            "successMessage",
            "Settings have been saved successfully.",
            3000
          );
        });
      });

      // Color picker value display
      const colorPicker = document.getElementById("themeColor");
      const colorValue = document.querySelector(".color-value");

      colorPicker.addEventListener("input", function () {
        colorValue.textContent = this.value;
      });

      // Test Email button
      document
        .getElementById("testEmailBtn")
        .addEventListener("click", function () {
          showMessage(
            "emailTest",
            "Test email has been sent successfully.",
            3000
          );
        });

      // Create Backup button
      document
        .getElementById("createBackupBtn")
        .addEventListener("click", function () {
          showMessage("backupStarted", "Creating backup... Please wait.", 3000);

          // Simulate backup creation
          setTimeout(() => {
            const a = document.createElement("a");
            a.style.display = "none";
            a.href = "#";
            a.download = `backup-${new Date().toISOString().split("T")[0]}.zip`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            showMessage("backupComplete", "Backup created successfully!", 3000);
          }, 2000);
        });

      // Restore Backup button
      document
        .getElementById("restoreBackupBtn")
        .addEventListener("click", function () {
          const fileInput = document.getElementById("backupFile");

          if (!fileInput.files.length) {
            showMessage(
              "backupError",
              "Please select a backup file first.",
              3000,
              "error"
            );
            return;
          }

          // Show confirmation dialog
          if (
            confirm(
              "Warning: Restoring a backup will overwrite all current data. This action cannot be undone. Are you sure you want to proceed?"
            )
          ) {
            showMessage(
              "restoreStarted",
              "Restoring backup... Please wait.",
              3000
            );

            // Simulate restore process
            setTimeout(() => {
              showMessage(
                "restoreComplete",
                "Backup restored successfully!",
                3000
              );
            }, 2500);
          }
        });
    });
  </script>

  <style>
    /* Settings page specific styles */
    .settings-container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }

    .settings-sidebar {
      flex: 0 0 200px;
    }

    .settings-nav {
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }

    .settings-nav li {
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
    }

    .settings-nav li:last-child {
      border-bottom: none;
    }

    .settings-nav li i {
      margin-right: 10px;
      color: #666;
    }

    .settings-nav li:hover {
      background-color: rgba(58, 134, 255, 0.05);
    }

    .settings-nav li.active {
      background-color: rgba(58, 134, 255, 0.12);
      color: #3a86ff;
    }

    .settings-nav li.active i {
      color: #3a86ff;
    }

    .settings-content {
      flex: 1;
    }

    .settings-tab {
      display: none;
    }

    .settings-tab.active {
      display: block;
    }

    .color-picker-container {
      display: flex;
      align-items: center;
    }

    .color-picker-container input[type="color"] {
      width: 50px;
      height: 40px;
      border: none;
      border-radius: 4px;
      margin-right: 10px;
      background: none;
      cursor: pointer;
    }

    .color-value {
      font-family: monospace;
      color: #666;
    }

    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 5px;
    }

    .radio-option {
      display: flex;
      align-items: center;
    }

    .radio-option input[type="radio"] {
      margin-right: 8px;
    }

    .alert {
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
    }

    .alert-warning {
      background-color: rgba(255, 190, 11, 0.2);
      border: 1px solid rgba(255, 190, 11, 0.5);
      color: #856404;
    }

    .alert i {
      margin-right: 10px;
    }

    @media (max-width: 768px) {
      .settings-container {
        flex-direction: column;
      }

      .settings-sidebar {
        flex: 0 0 auto;
        margin-bottom: 20px;
      }

      .settings-nav {
        display: flex;
        flex-wrap: wrap;
      }

      .settings-nav li {
        flex: 1;
        text-align: center;
        padding: 10px;
        font-size: 12px;
      }

      .settings-nav li i {
        margin-right: 0;
        margin-bottom: 5px;
        font-size: 16px;
        display: block;
      }
    }
  </style>
</body>
